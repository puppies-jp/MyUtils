# ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ä½•ã‹ã¨ä½¿ã†ã“ã¨ãŒã‚ã‚‹ã®ã§ä½¿ã„æ–¹ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰ã‚’ã“ã“ã«ã¾ã¨ã‚ã‚‹

[ãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](#here)

1. ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—

    > ^(ã‚­ãƒ£ãƒ¬ãƒƒãƒˆ) ã‚‰ã—ã„ã€ã€(%ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã§ããªã‹ã£ãŸã€‚ã€‚)
    > %ã«ã¤ã„ã¦ã¯%%ã¨ã‹ã€ã€

2. pipeã§ããªã„ã‚‰ã—ã„ã€ã€
3. å®Ÿè¡Œå¾Œã‚³ãƒãƒ³ãƒ‰ã‚’ç¹‹ã’ã‚‹
    > &&

<a name=here>ãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›¸ãæ–¹</a>

è©¦ã—ãŸã‘ã©ã§ãã‚“ã‹ã£ãŸ
å¾Œæ—¥èª¿ã¹ã‚‹

<a name=logrotate>ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ãƒˆ/ä¿å­˜å‘¨ã‚Šã‚’ãŠã“ãªã†</a>

* forfiles
* 7zipã‚’ä½¿ã†

```bat
forfiles /P D:\ã€‡ã€‡ã€‡ /d -365 /C "cmd /c IF @isdir==TRUE rmdir /S /Q @file"

rem && ã‚’ä½¿ã†ã“ã¨ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã«ç¹‹ã’ã‚‹ã“ã¨ãŒã§ãã‚‹
rem pipeã¯ãªã„ã‚‰ã—ã„ã€ã€
forfiles /P C:\Users\Administrator\Desktop /d -1 /C "cmd /c IF @isdir==TRUE  dir && echo ----- && tree"

set dirPath=C:\Users\Administrator\Desktop
set ptn=*.log
set cmd1=cmd /c IF @isdir==FALSE 

rem ğŸŒŸ ã‚³ãƒãƒ³ãƒ‰ã®æ¥ç¶šã«&&ã§ãªã^ã‚’ä½¿ã£ã¦ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦ã„ã‚‹
set cmd2=echo @path ^&^& move @path ./driverInfo/
forfiles /P "%dirPath%" /M %ptn% /D -0 /C "%cmd1% %cmd2%"

rem ğŸŒŸ 7zipã§åœ§ç¸®ã™ã‚‹å ´åˆã¯ã“ã‚“ãªæ„Ÿã˜ã§æ›¸ã‘ã‚‹
set cmd3=7zip a log.zip @path -mx=0 -sdel 
forfiles /P "%dirPath%" /M %ptn% /D -0 /C "%cmd1% %cmd3%"

```

## <a name=string>cmdæ–‡å­—åˆ—æ“ä½œ</a>

```bat
rem æ–‡å­—åˆ—æ“ä½œ
set V=ABCDEFGHI

echo %V:~2,3%   #(0ã‹ã‚‰æ•°ãˆã¦2ç•ªç›®ã®æ–‡å­—ã‹ã‚‰3æ–‡å­—å–å¾—)
>> "CDE" ãŒå‡ºåŠ›ã•ã‚Œã‚‹

echo %V:~-2,3%  #(æœ«å°¾ã‹ã‚‰æ•°ãˆã¦2ç•ªç›®ã®æ–‡å­—ã‹ã‚‰3æ–‡å­—å–å¾—)
>> "HI" ãŒå‡ºåŠ›ã•ã‚Œã‚‹

echo %V:~-2,-1%  #(æœ«å°¾ã‹ã‚‰æ•°ãˆã¦2ç•ªç›®ã®æ–‡å­—ã‹ã‚‰æœ«å°¾1æ–‡å­—å‰Šé™¤)
>> "H" ãŒå‡ºåŠ›ã•ã‚Œã‚‹

echo %V:AB=ab%   #(å¤‰æ•°å†…ã®æ–‡å­—t1ã‚’ã€æ–‡å­—t2ã«ç½®æ›)
>> "abCDEFGHI" ãŒå‡ºåŠ›ã•ã‚Œã‚‹
```
